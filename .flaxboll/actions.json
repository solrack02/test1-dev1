{"1740072098737":{"actionType":"saveAll","createdAt":"1740072098737","actionID":"1740072098737","userID":"#TEMP","path":"system.capsules.c4b58d84-5a43-4729-8671-c29035495a2f.capsUseCodeInfo.capsUseInputs.sss_freeValue-0.capsIptTxtValue","oldValue":"// ---------- import Packs\nimport JSON5 from 'json5';\nimport { Style, getStylesForProperty } from 'css-to-react-native';\n\n// ---------- import Local Tools\nimport { getVarValue } from './getVarValue';\n\n// ----------- set Style Variable Selection\nexport const getStlValues = (arrGetValues: string[]) => {\n  console.log('GET_VAR_VALUES', { arrGetValues });\n\n  const replaceVarsInString = (inputStr: string) => {\n    console.log('INPUT STRING:', inputStr);\n\n    return inputStr.replace(/\\$var_[\\w.]+/g, match => {\n      console.log('MATCH ENCONTRADO:', match);\n\n      const [hasVar, varValue] = getVarValue(match, 'noComponent');\n\n      return hasVar ? String(varValue) : match; // Substitui pelo valor real, ou mantém se não encontrado\n    });\n  };\n\n  const arrStyles = arrGetValues.map(value => {\n    console.log('ANTES DE AlTERADAS AS VARS', { value });\n    value = replaceVarsInString(value);\n    console.log('DEPOIS DE AlTERADAS AS VARS', { value });\n\n    // Garantir que value é uma string antes de chamar trim()\n    if (typeof value !== 'string') {\n      console.warn('Valor não é uma string, convertendo:', value);\n      value = JSON.stringify(value); // Converte para string se for um objeto\n    }\n\n    const trimmedString = value.trim(); // Agora é seguro chamar trim()\n\n    // Log para depuração\n    console.log('STRING PARA JSON5:', trimmedString);\n\n    // Tenta converter a string em objeto\n    const parsedObject = JSON5.parse(trimmedString);\n\n    console.log('OBJETO RESULTANTE:', parsedObject);\n\n    return parsedObject; // Retorna o objeto processado\n  });\n\n  console.log('GET_VAR_VALUES', { arrStyles });\n\n  const allStls = arrStyles.flatMap(style => {\n    if (style.shadowOffset) return style;\n    console.log('GET_VAR_VALUES', { style });\n\n    const possibleValues = Object.keys(style);\n\n    const setPx = (stlVal: any) => {\n      const checkNum = typeof stlVal === 'number';\n      const condVal = checkNum ? String(stlVal) + 'px' : stlVal;\n\n      return condVal;\n    };\n\n    const result = possibleValues.flatMap(key => {\n      const stlVal = style[key];\n\n      const [condVar, varValue] = getVarValue(stlVal, 'noComponent');\n      console.log('GET_VAR_VALUES', { varValue });\n\n      if (!condVar) {\n        const valToPx = String(setPx(stlVal));\n        const process2 = getStylesForProperty(key, valToPx);\n        console.log('GET_VAR_VALUES', { process2 });\n\n        return process2;\n      }\n\n      const varToPx = String(setPx(varValue));\n      const process3 = getStylesForProperty(key, varToPx, true);\n      console.log('GET_VAR_VALUES', { process3 });\n\n      return process3;\n    });\n\n    console.log('GET_VAR_VALUES', { result });\n    return result as Style[];\n    // return result;\n  });\n\n  console.log('GET_VAR_VALUES', { allStls });\n\n  return allStls;\n};","newValue":"// ---------- import Packs\nimport JSON5 from 'json5';\nimport { Style, getStylesForProperty } from 'css-to-react-native';\n\n// ---------- import Local Tools\nimport { getVarValue } from './getVarValue';\n\n// ----------- set Style Variable Selection\nexport const getStlValues = (arrGetValues: string[]) => {\n  console.log('GET_VAR_VALUES', { arrGetValues });\n\n  const replaceVarsInString = (inputStr: any) => {\n    if (typeof inputStr !== 'string') {\n      console.error(\n        'ERRO: `inputStr` não é uma string! Convertendo para string...',\n      );\n      inputStr = JSON.stringify(inputStr); // Converte para string se for um objeto\n    }\n\n    console.log('INPUT STRING:', inputStr);\n\n    return inputStr.replace(/\\$var_[\\w.]+/g, match => {\n      console.log('MATCH ENCONTRADO:', match);\n\n      const [hasVar, varValue] = getVarValue(match, 'noComponent');\n\n      return hasVar ? String(varValue) : match; // Substitui pelo valor real, ou mantém se não encontrado\n    });\n  };\n\n  const arrStyles = arrGetValues.map(value => {\n    console.log('ANTES DE AlTERADAS AS VARS', { value });\n    value = replaceVarsInString(value);\n    console.log('DEPOIS DE AlTERADAS AS VARS', { value });\n\n    // Garantir que value é uma string antes de chamar trim()\n    if (typeof value !== 'string') {\n      console.warn('Valor não é uma string, convertendo:', value);\n      value = JSON.stringify(value); // Converte para string se for um objeto\n    }\n\n    const trimmedString = value.trim(); // Agora é seguro chamar trim()\n\n    // Log para depuração\n    console.log('STRING PARA JSON5:', trimmedString);\n\n    // Tenta converter a string em objeto\n    const parsedObject = JSON5.parse(trimmedString);\n\n    console.log('OBJETO RESULTANTE:', parsedObject);\n\n    return parsedObject; // Retorna o objeto processado\n  });\n\n  console.log('GET_VAR_VALUES', { arrStyles });\n\n  const allStls = arrStyles.flatMap(style => {\n    if (style.shadowOffset) return style;\n    console.log('GET_VAR_VALUES', { style });\n\n    const possibleValues = Object.keys(style);\n\n    const setPx = (stlVal: any) => {\n      const checkNum = typeof stlVal === 'number';\n      const condVal = checkNum ? String(stlVal) + 'px' : stlVal;\n\n      return condVal;\n    };\n\n    const result = possibleValues.flatMap(key => {\n      const stlVal = style[key];\n\n      const [condVar, varValue] = getVarValue(stlVal, 'noComponent');\n      console.log('GET_VAR_VALUES', { varValue });\n\n      if (!condVar) {\n        const valToPx = String(setPx(stlVal));\n        const process2 = getStylesForProperty(key, valToPx);\n        console.log('GET_VAR_VALUES', { process2 });\n\n        return process2;\n      }\n\n      const varToPx = String(setPx(varValue));\n      const process3 = getStylesForProperty(key, varToPx, true);\n      console.log('GET_VAR_VALUES', { process3 });\n\n      return process3;\n    });\n\n    console.log('GET_VAR_VALUES', { result });\n    return result as Style[];\n    // return result;\n  });\n\n  console.log('GET_VAR_VALUES', { allStls });\n\n  return allStls;\n};"}}